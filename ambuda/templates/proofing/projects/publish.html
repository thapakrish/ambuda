{% extends 'proofing/base-sidebar.html' %}
{% import "macros/components.html" as components %}
{% import "macros/proofing.html" as m %}


{% block title %}Publish: {{ project.display_title }} | Ambuda{% endblock %}


{% block sidebar %}{{ m.main_nav('projects', current_user=current_user) }}{% endblock %}


{% block content %}
{{ m.project_header_nested('Publish', project) }}
{{ m.project_tabs(project=project, active='publish', is_mod=current_user.is_moderator) }}

<div class="prose max-w-none">
  <h2>Publish</h2>

  <form method="POST" action="{{ url_for('proofing.project.publish_config', slug=project.slug) }}"
    class="not-prose">
    <div class="mb-4">
      <label class="block font-bold mb-2" for="publish_config">
        Export config (JSON)
      </label>
      <textarea
        id="publish_config"
        name="publish_config"
        rows="15"
        class="w-full font-mono text-sm border border-slate-300 rounded p-3"
        placeholder='[{"slug": "...", "title": "...", "target": "..."}]'>{{ publish_config }}</textarea>
    </div>

    <button type="submit" class="btn btn-submit">
      Preview Changes
    </button>
  </form>
</div>

{% endblock %}
